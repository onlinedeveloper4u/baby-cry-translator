---
description: When working with database
alwaysApply: false
---
# ðŸ—„ Data Layer (Supabase)

- Initialize client in `src/config/supabase.ts`.
- Put queries/mutations in `src/api/*`.
- Never call Supabase directly from components.
- Use React Query for fetching, caching, syncing.
- Always type responses with Supabase types.
- Organize API by domain (`auth.ts`, `babies.ts`, `cries.ts`).
- Wrap calls in try/catch and log errors to Sentry.
- Use descriptive query keys (`["babies", userId]`).
- Store large files in Supabase Storage, only metadata in Postgres.
- Export table/column constants from `src/config/db.ts`.